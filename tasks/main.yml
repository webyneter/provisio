---

- name: APT
  block:
  - name: APT update and upgrade
    apt:
      update_cache: yes
      upgrade: safe

  - name: Install htop
    package:
      name: htop
      state: present

  - name: Install tree
    package:
      name: tree
      state: present

- name: Turn off password authentication
  replace:
    path: /etc/ssh/sshd_config
    regexp: "^PasswordAuthentication yes$"
    replace: "PasswordAuthentication no"
    backup: yes
  notify: restart ssh

- include_role:
    # Such a path allows for the role to be resolved from within dependent roles
    name: provisio/roles/geerlingguy.docker  # TODO: this seems like a _slight_ violation of SRP but not too much choice here, I guess...
